<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Rotina da Su ðŸŒ¸</title>

  <meta name="theme-color" content="#f7e8dd" />
  <meta name="description" content="Rotina da Su - Planner fofinho, completo e editÃ¡vel ðŸ’–" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg: #fbf6f0;
      --bg2: #f7e8dd;
      --card: rgba(255,255,255,0.75);
      --card2: rgba(255,255,255,0.55);
      --text: #3a2d2d;
      --muted: rgba(58,45,45,0.65);

      --pink: #ff7fb2;
      --pink2: #ffb8d7;
      --lilac: #b38cff;
      --lilac2: #d7c3ff;
      --tiffany: #47d7c8;
      --tiffany2: #bff5ef;
      --green: #79d79a;
      --green2: #c7f3d6;
      --beige: #e9d4c1;
      --wood: #c9a57c;

      --danger: #ff4d6d;
      --warning: #ffcc5c;
      --ok: #49d17c;

      --shadow: 0 14px 35px rgba(0,0,0,0.10);
      --shadow2: 0 10px 25px rgba(0,0,0,0.08);

      --radius: 22px;
      --radius2: 16px;
    }

    *{box-sizing:border-box;}
    html,body{
      margin:0;
      padding:0;
      font-family: "Quicksand", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(circle at 20% 10%, #ffffff 0%, var(--bg) 45%, var(--bg2) 100%);
      color: var(--text);
    }

    body{
      min-height: 100vh;
      padding-bottom: 100px;
    }

    .app{
      max-width: 980px;
      margin: 0 auto;
      padding: 18px 14px 120px 14px;
    }

    .topbar{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 12px;
      margin-bottom: 14px;
    }

    .title{
      display:flex;
      flex-direction:column;
      gap: 6px;
    }

    .title h1{
      margin:0;
      font-size: 1.45rem;
      letter-spacing: 0.2px;
    }

    .subtitle{
      font-size: 0.92rem;
      color: var(--muted);
      line-height: 1.2rem;
    }

    .motivation{
      margin-top: 6px;
      display:flex;
      flex-wrap:wrap;
      gap: 8px;
      align-items:center;
    }

    .pill{
      padding: 7px 12px;
      border-radius: 999px;
      font-weight: 700;
      font-size: 0.85rem;
      background: linear-gradient(90deg, rgba(255,127,178,0.22), rgba(179,140,255,0.18));
      border: 1px solid rgba(255,127,178,0.18);
      box-shadow: 0 6px 18px rgba(0,0,0,0.06);
    }

    .pill small{
      font-weight: 600;
      opacity: 0.75;
    }

    .btn{
      border:none;
      border-radius: 999px;
      padding: 10px 14px;
      font-weight: 800;
      cursor:pointer;
      font-size: 0.9rem;
      transition: transform .08s ease, filter .15s ease;
      box-shadow: var(--shadow2);
      background: linear-gradient(180deg, #ffffff, rgba(255,255,255,0.75));
      color: var(--text);
      border: 1px solid rgba(0,0,0,0.06);
    }
    .btn:active{ transform: scale(0.98); }

    .btnPrimary{
      background: linear-gradient(180deg, rgba(255,127,178,0.85), rgba(179,140,255,0.75));
      color: #fff;
      border: 1px solid rgba(255,255,255,0.35);
      box-shadow: 0 12px 26px rgba(179,140,255,0.25);
    }

    .btnSoft{
      background: linear-gradient(180deg, rgba(255,255,255,0.85), rgba(255,255,255,0.55));
      color: var(--text);
    }

    .btnDanger{
      background: linear-gradient(180deg, rgba(255,77,109,0.85), rgba(255,77,109,0.65));
      color: #fff;
      border: 1px solid rgba(255,255,255,0.35);
    }

    .btnMini{
      padding: 8px 12px;
      font-size: 0.82rem;
      box-shadow: none;
    }

    .btnIcon{
      display:flex;
      align-items:center;
      gap: 8px;
      justify-content:center;
    }

    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 14px;
    }

    @media (min-width: 860px){
      .grid{
        grid-template-columns: 1.25fr 0.75fr;
      }
    }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,0.75), rgba(255,255,255,0.45));
      border: 1px solid rgba(0,0,0,0.06);
      border-radius: var(--radius);
      padding: 14px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      position: relative;
      overflow:hidden;
    }

    .card:before{
      content:"";
      position:absolute;
      top:-80px;
      right:-80px;
      width: 180px;
      height: 180px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, rgba(255,127,178,0.25), rgba(179,140,255,0.12));
      filter: blur(0px);
      opacity: 0.8;
    }

    .cardHeader{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 10px;
      margin-bottom: 10px;
      position: relative;
      z-index: 2;
    }

    .cardTitle{
      font-size: 1.05rem;
      font-weight: 900;
      margin:0;
    }

    .cardSub{
      margin-top: 4px;
      font-size: 0.9rem;
      color: var(--muted);
      font-weight: 600;
    }

    .row{
      display:flex;
      flex-wrap:wrap;
      gap: 10px;
      align-items:center;
    }

    .divider{
      height: 1px;
      width: 100%;
      background: rgba(0,0,0,0.06);
      margin: 12px 0;
    }

    .tabs{
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
      margin: 10px 0 14px 0;
    }

    .tab{
      border:none;
      cursor:pointer;
      padding: 10px 12px;
      border-radius: 999px;
      font-weight: 900;
      font-size: 0.88rem;
      background: rgba(255,255,255,0.6);
      border: 1px solid rgba(0,0,0,0.06);
      color: var(--text);
      transition: transform .08s ease;
    }
    .tab:active{ transform: scale(0.98); }

    .tab.active{
      background: linear-gradient(180deg, rgba(255,127,178,0.85), rgba(255,184,215,0.65));
      color: #fff;
      border: 1px solid rgba(255,255,255,0.35);
    }

    .tag{
      display:inline-flex;
      align-items:center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 0.82rem;
      font-weight: 800;
      border: 1px solid rgba(0,0,0,0.06);
      background: rgba(255,255,255,0.55);
    }

    .tag .dot{
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: var(--pink);
      box-shadow: 0 0 0 3px rgba(255,127,178,0.15);
    }

    .tag.tiffany .dot{ background: var(--tiffany); box-shadow: 0 0 0 3px rgba(71,215,200,0.18); }
    .tag.green .dot{ background: var(--green); box-shadow: 0 0 0 3px rgba(121,215,154,0.18); }
    .tag.lilac .dot{ background: var(--lilac); box-shadow: 0 0 0 3px rgba(179,140,255,0.18); }
    .tag.beige .dot{ background: var(--wood); box-shadow: 0 0 0 3px rgba(201,165,124,0.18); }

    .field{
      display:flex;
      flex-direction:column;
      gap: 6px;
      width: 100%;
    }

    label{
      font-weight: 900;
      font-size: 0.9rem;
    }

    input, select, textarea{
      width: 100%;
      border-radius: 16px;
      border: 1px solid rgba(0,0,0,0.10);
      padding: 12px 12px;
      font-size: 0.95rem;
      background: rgba(255,255,255,0.85);
      color: var(--text);
      outline:none;
      box-shadow: 0 10px 22px rgba(0,0,0,0.05);
      font-family: inherit;
    }

    textarea{
      min-height: 96px;
      resize: vertical;
    }

    .twoCols{
      display:grid;
      grid-template-columns: 1fr;
      gap: 10px;
    }
    @media (min-width: 520px){
      .twoCols{ grid-template-columns: 1fr 1fr; }
    }

    .taskList{
      display:flex;
      flex-direction:column;
      gap: 10px;
    }

    .task{
      border-radius: 18px;
      padding: 12px 12px;
      background: rgba(255,255,255,0.55);
      border: 1px solid rgba(0,0,0,0.06);
      box-shadow: 0 10px 22px rgba(0,0,0,0.06);
      display:flex;
      flex-direction:column;
      gap: 10px;
      position: relative;
      overflow:hidden;
    }

    .taskTop{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 10px;
    }

    .taskLeft{
      display:flex;
      align-items:flex-start;
      gap: 10px;
      flex:1;
    }

    .emoji{
      font-size: 1.35rem;
      line-height: 1;
      padding: 10px;
      border-radius: 16px;
      background: rgba(255,255,255,0.75);
      border: 1px solid rgba(0,0,0,0.06);
      box-shadow: 0 10px 22px rgba(0,0,0,0.05);
      min-width: 44px;
      text-align:center;
    }

    .taskName{
      margin:0;
      font-weight: 900;
      font-size: 0.98rem;
    }

    .taskMeta{
      margin-top: 3px;
      font-size: 0.85rem;
      color: var(--muted);
      font-weight: 700;
      display:flex;
      flex-wrap:wrap;
      gap: 8px;
      align-items:center;
    }

    .taskButtons{
      display:flex;
      gap: 8px;
      flex-wrap:wrap;
      justify-content:flex-end;
      align-items:center;
    }

    .checkRow{
      display:flex;
      align-items:center;
      gap: 10px;
      flex-wrap:wrap;
    }

    .checkRow input[type="checkbox"]{
      width: 20px;
      height: 20px;
      border-radius: 6px;
      box-shadow:none;
    }

    .progressBar{
      height: 12px;
      width: 100%;
      background: rgba(0,0,0,0.06);
      border-radius: 999px;
      overflow:hidden;
      border: 1px solid rgba(0,0,0,0.05);
    }

    .progressFill{
      height: 100%;
      width: 0%;
      border-radius: 999px;
      background: linear-gradient(90deg, rgba(255,127,178,0.95), rgba(179,140,255,0.95));
      transition: width .25s ease;
    }

    .small{
      font-size: 0.86rem;
      color: var(--muted);
      font-weight: 700;
      line-height: 1.2rem;
    }

    .footerNav{
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 10px 10px calc(10px + env(safe-area-inset-bottom));
      background: linear-gradient(180deg, rgba(251,246,240,0.25), rgba(247,232,221,0.95));
      backdrop-filter: blur(12px);
      border-top: 1px solid rgba(0,0,0,0.06);
      z-index: 999;
    }

    .footerNav .navRow{
      max-width: 980px;
      margin: 0 auto;
      display:flex;
      gap: 10px;
      justify-content:space-between;
      flex-wrap:wrap;
    }

    .navBtn{
      flex: 1;
      min-width: 110px;
      border-radius: 999px;
      border: 1px solid rgba(0,0,0,0.06);
      background: rgba(255,255,255,0.65);
      padding: 10px 12px;
      font-weight: 900;
      cursor:pointer;
      font-size: 0.86rem;
      box-shadow: 0 10px 20px rgba(0,0,0,0.05);
      display:flex;
      align-items:center;
      justify-content:center;
      gap: 8px;
    }

    .navBtn.active{
      background: linear-gradient(180deg, rgba(71,215,200,0.85), rgba(179,140,255,0.55));
      color: #fff;
      border: 1px solid rgba(255,255,255,0.30);
    }

    .modalOverlay{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.30);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 18px;
      z-index: 9999;
    }

    .modal{
      width: 100%;
      max-width: 720px;
      background: linear-gradient(180deg, rgba(255,255,255,0.92), rgba(255,255,255,0.72));
      border: 1px solid rgba(0,0,0,0.08);
      border-radius: 26px;
      padding: 14px;
      box-shadow: 0 20px 55px rgba(0,0,0,0.22);
      backdrop-filter: blur(12px);
      max-height: 86vh;
      overflow:auto;
      position: relative;
    }

    .modalHeader{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap: 10px;
      margin-bottom: 10px;
    }

    .modalTitle{
      margin:0;
      font-size: 1.05rem;
      font-weight: 900;
    }

    .closeX{
      border:none;
      background: rgba(255,255,255,0.75);
      border: 1px solid rgba(0,0,0,0.06);
      border-radius: 999px;
      font-weight: 900;
      cursor:pointer;
      padding: 8px 12px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.05);
    }

    .miniGrid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }

    @media (min-width: 680px){
      .miniGrid{ grid-template-columns: 1fr 1fr; }
    }

    .colorPickerRow{
      display:flex;
      flex-wrap:wrap;
      gap: 10px;
    }

    .colorBtn{
      border:none;
      cursor:pointer;
      border-radius: 999px;
      padding: 9px 12px;
      font-weight: 900;
      font-size: 0.85rem;
      border: 1px solid rgba(0,0,0,0.06);
      background: rgba(255,255,255,0.7);
      box-shadow: 0 10px 20px rgba(0,0,0,0.05);
      display:flex;
      align-items:center;
      gap: 8px;
    }

    .colorSwatch{
      width: 14px;
      height: 14px;
      border-radius: 999px;
      border: 2px solid rgba(255,255,255,0.8);
      box-shadow: 0 0 0 3px rgba(0,0,0,0.06);
    }

    .woodStrip{
      height: 10px;
      width: 100%;
      border-radius: 999px;
      background: linear-gradient(90deg, rgba(201,165,124,0.55), rgba(233,212,193,0.55));
      border: 1px solid rgba(0,0,0,0.06);
      margin-top: 8px;
    }

    .noteBox{
      background: rgba(255,255,255,0.62);
      border: 1px solid rgba(0,0,0,0.06);
      border-radius: 18px;
      padding: 12px;
      box-shadow: 0 10px 22px rgba(0,0,0,0.05);
    }

    .noteBox ul{
      margin: 8px 0 0 18px;
      padding: 0;
    }

    .noteBox li{
      margin: 6px 0;
      font-weight: 700;
      color: rgba(58,45,45,0.9);
    }

    .waterCups{
      display:flex;
      flex-wrap:wrap;
      gap: 10px;
      margin-top: 8px;
    }

    .cup{
      width: 40px;
      height: 40px;
      border-radius: 16px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size: 1.2rem;
      cursor:pointer;
      user-select:none;
      border: 1px solid rgba(0,0,0,0.06);
      background: rgba(255,255,255,0.75);
      box-shadow: 0 10px 20px rgba(0,0,0,0.05);
      transition: transform .08s ease;
    }

    .cup:active{ transform: scale(0.97); }

    .cup.filled{
      background: linear-gradient(180deg, rgba(71,215,200,0.65), rgba(71,215,200,0.30));
      border: 1px solid rgba(71,215,200,0.30);
    }

    .tiny{
      font-size: 0.8rem;
      opacity: 0.8;
      font-weight: 700;
    }

    .timerBox{
      display:flex;
      flex-direction:column;
      gap: 10px;
      background: rgba(255,255,255,0.60);
      border: 1px solid rgba(0,0,0,0.06);
      border-radius: 18px;
      padding: 12px;
      box-shadow: 0 10px 22px rgba(0,0,0,0.05);
    }

    .timerTop{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap: 10px;
      flex-wrap:wrap;
    }

    .timerTime{
      font-size: 1.4rem;
      font-weight: 900;
      letter-spacing: 0.5px;
    }

    .timerBtns{
      display:flex;
      flex-wrap:wrap;
      gap: 8px;
    }

    .hint{
      background: linear-gradient(180deg, rgba(255,184,215,0.35), rgba(255,255,255,0.35));
      border: 1px dashed rgba(255,127,178,0.35);
      border-radius: 18px;
      padding: 10px 12px;
      font-weight: 800;
      color: rgba(58,45,45,0.8);
    }

    .chart{
      width: 100%;
      height: 180px;
      border-radius: 18px;
      border: 1px solid rgba(0,0,0,0.06);
      background: rgba(255,255,255,0.55);
      padding: 10px;
      box-shadow: 0 10px 22px rgba(0,0,0,0.05);
    }

    canvas{
      width: 100% !important;
      height: 100% !important;
    }

    .badge{
      padding: 6px 10px;
      border-radius: 999px;
      font-weight: 900;
      font-size: 0.82rem;
      background: rgba(255,255,255,0.6);
      border: 1px solid rgba(0,0,0,0.06);
    }

    .badge.ok{
      background: rgba(73,209,124,0.18);
      border: 1px solid rgba(73,209,124,0.25);
    }

    .badge.warn{
      background: rgba(255,204,92,0.22);
      border: 1px solid rgba(255,204,92,0.35);
    }

    .badge.bad{
      background: rgba(255,77,109,0.15);
      border: 1px solid rgba(255,77,109,0.25);
    }

    .sticky{
      position: sticky;
      top: 0;
      z-index: 5;
      padding-top: 4px;
      background: linear-gradient(180deg, rgba(251,246,240,0.95), rgba(251,246,240,0.65));
      backdrop-filter: blur(10px);
      border-radius: 18px;
    }

  </style>
</head>

<body>
  <div id="root"></div>

  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

  <script>
    const { useEffect, useMemo, useRef, useState } = React;

    function uid(){
      return Math.random().toString(16).slice(2) + "-" + Date.now().toString(16);
    }

    function todayKey(){
      const d = new Date();
      const yyyy = d.getFullYear();
      const mm = String(d.getMonth()+1).padStart(2,"0");
      const dd = String(d.getDate()).padStart(2,"0");
      return yyyy + "-" + mm + "-" + dd;
    }

    function formatTime(seconds){
      seconds = Math.max(0, Math.floor(seconds));
      const m = Math.floor(seconds / 60);
      const s = seconds % 60;
      return String(m).padStart(2,"0") + ":" + String(s).padStart(2,"0");
    }

    function safeJSONParse(str, fallback){
      try{
        return JSON.parse(str);
      }catch(e){
        return fallback;
      }
    }

    const COLOR_PRESETS = [
      { key:"pink", label:"Rosa ðŸ’—", color:"#ff7fb2" },
      { key:"lilac", label:"LilÃ¡s ðŸ’œ", color:"#b38cff" },
      { key:"tiffany", label:"Tiffany ðŸ’§", color:"#47d7c8" },
      { key:"green", label:"Verde ðŸŒ±", color:"#79d79a" },
      { key:"beige", label:"Bege/Madeira ðŸ¥£", color:"#c9a57c" },
      { key:"black", label:"Preto ðŸ–¤", color:"#1f1a1a" },
      { key:"white", label:"Branco ðŸ¤", color:"#ffffff" },
    ];

    const EMOJI_SUGGESTIONS = [
      "ðŸŒ¸","ðŸ’–","âœ¨","ðŸ•Šï¸","ðŸ“–","ðŸ“","â°","ðŸ‘—","ðŸ§º","ðŸ«§","â˜€ï¸","ðŸ‘","ðŸ’¨","ðŸšª",
      "ðŸ›ï¸","ðŸ§¹","ðŸª£","ðŸ§½","ðŸ½ï¸","ðŸ²","ðŸ”¥","ðŸ¥£","ðŸ«™","ðŸ¥•","ðŸ¥©","ðŸ«˜","ðŸž",
      "ðŸŒ¿","ðŸŒ±","ðŸŒŠ","ðŸŒ·","ðŸª´","ðŸ“","ðŸ„","ðŸ","ðŸ’Š","ðŸ’§","ðŸ–¤","ðŸ’‡â€â™€ï¸","ðŸ§´",
      "ðŸ§˜â€â™€ï¸","ðŸš¿","ðŸ’…","ðŸ‘‘","ðŸ§¡","ðŸ’œ","ðŸ’—","ðŸ¤"
    ];

    const DEFAULT_QUOTES = [
      "Su, vocÃª Ã© capaz de cuidar da sua vida com doÃ§ura. ðŸŒ¸",
      "A vida nÃ£o precisa ser perfeita para ser maravilhosa. âœ¨",
      "Uma rotina leve Ã© uma vida mais feliz. ðŸ’–",
      "VocÃª estÃ¡ construindo sua paz, um passo de cada vez. ðŸ•Šï¸",
      "Seu lar Ã© seu jardim. Cuide com amor. ðŸŒ·",
      "FÃ© + constÃ¢ncia = milagres silenciosos. ðŸ’§",
      "Pequenas aÃ§Ãµes diÃ¡rias criam grandes resultados. ðŸŒ¿",
      "Hoje vocÃª vai florescer. ðŸŒ¸âœ¨"
    ];

    const DEFAULT_MODULES = [
      {
        id: "rotina-constante",
        name: "Rotina Constante",
        emoji: "ðŸ•Šï¸",
        colorKey: "tiffany",
        description: "FÃ©, estudo, reuniÃµes e constÃ¢ncia ðŸ’§",
        tasks: [
          { id: uid(), name:"Estudo da BÃ­blia com o Lucas", emoji:"ðŸ“–", colorKey:"tiffany", schedule:"Segunda 19:00", minutes: 30, doneDates: {} },
          { id: uid(), name:"PreparaÃ§Ã£o (iniciar)", emoji:"â°", colorKey:"tiffany", schedule:"Quarta 07:30", minutes: 20, doneDates: {} },
          { id: uid(), name:"Campo pelo Zoom (cartas)", emoji:"âœï¸", colorKey:"tiffany", schedule:"Quarta 08:00", minutes: 60, doneDates: {} },
          { id: uid(), name:"Preparar reuniÃ£o meio de semana", emoji:"ðŸ“", colorKey:"tiffany", schedule:"Quarta 13:00", minutes: 45, doneDates: {} },
          { id: uid(), name:"Estudo da Sentinela", emoji:"ðŸ“š", colorKey:"tiffany", schedule:"SÃ¡bado pÃ³s-almoÃ§o", minutes: 45, doneDates: {} },
          { id: uid(), name:"Arrumar crianÃ§as e sair para reuniÃ£o", emoji:"ðŸ‘”", colorKey:"tiffany", schedule:"SÃ¡bado 17:00", minutes: 40, doneDates: {} },
        ],
        notes: [
          "Sempre anotar pontos com capÃ­tulo e versÃ­culo ðŸ“–",
          "Separar 3 ideias-chave para aplicar na semana âœ¨",
          "Orar antes de comeÃ§ar e agradecer ao final ðŸ•Šï¸"
        ]
      },
      {
        id: "casa",
        name: "Casa & Regras",
        emoji: "ðŸ¡",
        colorKey: "pink",
        description: "Limpeza, lavanderia, closet e organizaÃ§Ã£o ðŸ’…",
        tasks: [
          { id: uid(), name:"Arrumar cama apÃ³s Edinei levar Lucas", emoji:"ðŸ›ï¸", colorKey:"pink", schedule:"DiÃ¡rio", minutes: 5, doneDates: {} },
          { id: uid(), name:"Varrer chÃ£o", emoji:"ðŸ§¹", colorKey:"pink", schedule:"DiÃ¡rio", minutes: 15, doneDates: {} },
          { id: uid(), name:"Passar pano", emoji:"ðŸª£", colorKey:"pink", schedule:"DiÃ¡rio", minutes: 20, doneDates: {} },
          { id: uid(), name:"Pia limpa", emoji:"ðŸ½ï¸", colorKey:"pink", schedule:"DiÃ¡rio", minutes: 10, doneDates: {} },
          { id: uid(), name:"Regra do Closet: uma seÃ§Ã£o por dia", emoji:"ðŸ‘—", colorKey:"pink", schedule:"DiÃ¡rio", minutes: 20, doneDates: {} },
          { id: uid(), name:"Lei do minimalismo (entrou uma peÃ§a, sai outra)", emoji:"ðŸ”„", colorKey:"pink", schedule:"Sempre", minutes: 5, doneDates: {} },
        ],
        notes: [
          "Cinco Ous da lavanderia: Lavou ðŸ«§ | Pendurou â˜€ï¸ | Dobrou ðŸ‘ | Passou ðŸ’¨ | Guardou ðŸšª",
          "Casa limpa = mente leve âœ¨",
          "Se cansar, faÃ§a sÃ³ 15 min. Isso conta ðŸ’–"
        ]
      },
      {
        id: "sitio",
        name: "SÃ­tio & Horta",
        emoji: "ðŸŒ¿",
        colorKey: "green",
        description: "Horta, riacho, flores e cuidado da terra ðŸŒ±",
        tasks: [
          { id: uid(), name:"Horta do zero (almeirÃ£o + mudas)", emoji:"ðŸŒ±", colorKey:"green", schedule:"Semanal", minutes: 45, doneDates: {} },
          { id: uid(), name:"Riachinho (rastelar e flores)", emoji:"ðŸŒŠ", colorKey:"green", schedule:"Semanal", minutes: 35, doneDates: {} },
          { id: uid(), name:"Cuidar das flores do fundo", emoji:"ðŸŒ·", colorKey:"green", schedule:"Semanal", minutes: 25, doneDates: {} },
        ],
        notes: [
          "Regar no final da tarde ajuda as mudas ðŸŒ¿",
          "Terra cuidada Ã© vida multiplicada ðŸŒ±"
        ]
      },
      {
        id: "cozinha",
        name: "Cozinha & Congelados",
        emoji: "ðŸ²",
        colorKey: "beige",
        description: "ProduÃ§Ã£o semanal e estoque do freezer ðŸ¥£",
        tasks: [
          { id: uid(), name:"Dia da produÃ§Ã£o (fogÃ£o a lenha)", emoji:"ðŸ”¥", colorKey:"beige", schedule:"1x por semana", minutes: 120, doneDates: {} },
          { id: uid(), name:"Preparar feijÃ£o (congelar porÃ§Ãµes)", emoji:"ðŸ«˜", colorKey:"beige", schedule:"Semanal", minutes: 60, doneDates: {} },
          { id: uid(), name:"Preparar carne moÃ­da/desfiada", emoji:"ðŸ¥©", colorKey:"beige", schedule:"Semanal", minutes: 70, doneDates: {} },
          { id: uid(), name:"Branquear legumes (estoque)", emoji:"ðŸ¥•", colorKey:"beige", schedule:"Semanal", minutes: 40, doneDates: {} },
          { id: uid(), name:"Mistura seca pÃ£o de queijo/bolo", emoji:"ðŸ«™", colorKey:"beige", schedule:"Mensal", minutes: 30, doneDates: {} },
          { id: uid(), name:"Organizar freezer e etiquetar", emoji:"ðŸ·ï¸", colorKey:"beige", schedule:"Semanal", minutes: 20, doneDates: {} },
        ],
        notes: [
          "Fazer porÃ§Ãµes pequenas ajuda a semana render ðŸ¥£",
          "Sempre etiquetar com data ðŸ·ï¸",
          "Cozinha organizada = paz no dia a dia âœ¨"
        ]
      },
      {
        id: "autocuidado",
        name: "Autocuidado & SaÃºde",
        emoji: "ðŸ’…",
        colorKey: "lilac",
        description: "Beleza, Ã¡gua, anticoncepcional e cronograma ðŸ–¤",
        tasks: [
          { id: uid(), name:"Tomar anticoncepcional", emoji:"ðŸ’Š", colorKey:"lilac", schedule:"DiÃ¡rio", minutes: 1, doneDates: {} },
          { id: uid(), name:"Cronograma capilar (H/N/R)", emoji:"ðŸ§´", colorKey:"lilac", schedule:"Semanal", minutes: 30, doneDates: {} },
          { id: uid(), name:"HenÃª (verificar data e retoque)", emoji:"ðŸ–¤", colorKey:"lilac", schedule:"Mensal", minutes: 20, doneDates: {} },
          { id: uid(), name:"DepilaÃ§Ã£o (marcar prÃ³xima)", emoji:"âœ¨", colorKey:"lilac", schedule:"Mensal", minutes: 40, doneDates: {} },
        ],
        notes: [
          "Beleza Ã© autocuidado, nÃ£o cobranÃ§a ðŸ’–",
          "Seu corpo merece carinho âœ¨"
        ]
      }
    ];

    function App(){
      const STORAGE_KEY = "rotina_su_app_v2";
      const HUMOR_KEY = "rotina_su_humor_v2";

      const [activeTab, setActiveTab] = useState("home");
      const [modules, setModules] = useState([]);
      const [quotes, setQuotes] = useState(DEFAULT_QUOTES);
      const [quoteIndex, setQuoteIndex] = useState(0);

      const [moodToday, setMoodToday] = useState(70);
      const [moodHistory, setMoodHistory] = useState({});

      const [showModalTask, setShowModalTask] = useState(false);
      const [modalModuleId, setModalModuleId] = useState(null);
      const [editTaskId, setEditTaskId] = useState(null);

      const [taskName, setTaskName] = useState("");
      const [taskEmoji, setTaskEmoji] = useState("ðŸŒ¸");
      const [taskColorKey, setTaskColorKey] = useState("pink");
      const [taskSchedule, setTaskSchedule] = useState("DiÃ¡rio");
      const [taskMinutes, setTaskMinutes] = useState(15);

      const [showThemeModal, setShowThemeModal] = useState(false);

      const [timerSeconds, setTimerSeconds] = useState(15 * 60);
      const [timerRunning, setTimerRunning] = useState(false);
      const [timerLabel, setTimerLabel] = useState("CronÃ´metro Fofo âœ¨");

      const timerRef = useRef(null);

      useEffect(() => {
        const saved = safeJSONParse(localStorage.getItem(STORAGE_KEY), null);
        if(saved && saved.modules){
          setModules(saved.modules);
          if(saved.quotes) setQuotes(saved.quotes);
          if(typeof saved.quoteIndex === "number") setQuoteIndex(saved.quoteIndex);
        }else{
          setModules(DEFAULT_MODULES);
        }

        const moodSaved = safeJSONParse(localStorage.getItem(HUMOR_KEY), {});
        setMoodHistory(moodSaved);

        const tk = todayKey();
        if(moodSaved && moodSaved[tk] != null){
          setMoodToday(moodSaved[tk]);
        }
      }, []);

      useEffect(() => {
        localStorage.setItem(STORAGE_KEY, JSON.stringify({
          modules,
          quotes,
          quoteIndex
        }));
      }, [modules, quotes, quoteIndex]);

      useEffect(() => {
        const tk = todayKey();
        const newHist = { ...moodHistory, [tk]: moodToday };
        setMoodHistory(newHist);
        localStorage.setItem(HUMOR_KEY, JSON.stringify(newHist));
      }, [moodToday]);

      useEffect(() => {
        if(timerRunning){
          timerRef.current = setInterval(() => {
            setTimerSeconds(s => {
              if(s <= 1){
                clearInterval(timerRef.current);
                timerRef.current = null;
                setTimerRunning(false);
                try{
                  navigator.vibrate && navigator.vibrate([200,100,200,100,400]);
                }catch(e){}
                alert("â° Tempo acabou, Su! VocÃª arrasou! ðŸ’–âœ¨");
                return 0;
              }
              return s - 1;
            });
          }, 1000);
        }else{
          if(timerRef.current){
            clearInterval(timerRef.current);
            timerRef.current = null;
          }
        }
        return () => {
          if(timerRef.current){
            clearInterval(timerRef.current);
            timerRef.current = null;
          }
        };
      }, [timerRunning]);

      const today = todayKey();

      function colorOf(key){
        const found = COLOR_PRESETS.find(c => c.key === key);
        return found ? found.color : "#ff7fb2";
      }

      function moduleById(id){
        return modules.find(m => m.id === id);
      }

      function toggleDone(moduleId, taskId){
        setModules(prev => prev.map(m => {
          if(m.id !== moduleId) return m;
          return {
            ...m,
            tasks: m.tasks.map(t => {
              if(t.id !== taskId) return t;
              const doneDates = { ...(t.doneDates || {}) };
              doneDates[today] = !doneDates[today];
              return { ...t, doneDates };
            })
          };
        }));
      }

      function openNewTask(moduleId){
        setModalModuleId(moduleId);
        setEditTaskId(null);
        setTaskName("");
        setTaskEmoji("ðŸŒ¸");
        setTaskColorKey(moduleById(moduleId)?.colorKey || "pink");
        setTaskSchedule("DiÃ¡rio");
        setTaskMinutes(15);
        setShowModalTask(true);
      }

      function openEditTask(moduleId, task){
        setModalModuleId(moduleId);
        setEditTaskId(task.id);
        setTaskName(task.name);
        setTaskEmoji(task.emoji || "ðŸŒ¸");
        setTaskColorKey(task.colorKey || "pink");
        setTaskSchedule(task.schedule || "DiÃ¡rio");
        setTaskMinutes(task.minutes || 15);
        setShowModalTask(true);
      }

      function saveTask(){
        if(!modalModuleId) return;
        if(!taskName.trim()){
          alert("Digite o nome da tarefa ðŸ’–");
          return;
        }

        setModules(prev => prev.map(m => {
          if(m.id !== modalModuleId) return m;

          if(editTaskId){
            return {
              ...m,
              tasks: m.tasks.map(t => {
                if(t.id !== editTaskId) return t;
                return {
                  ...t,
                  name: taskName.trim(),
                  emoji: taskEmoji,
                  colorKey: taskColorKey,
                  schedule: taskSchedule,
                  minutes: Number(taskMinutes) || 15
                };
              })
            };
          }

          return {
            ...m,
            tasks: [
              ...m.tasks,
              {
                id: uid(),
                name: taskName.trim(),
                emoji: taskEmoji,
                colorKey: taskColorKey,
                schedule: taskSchedule,
                minutes: Number(taskMinutes) || 15,
                doneDates: {}
              }
            ]
          };
        }));

        setShowModalTask(false);
      }

      function deleteTask(){
        if(!modalModuleId || !editTaskId) return;
        if(!confirm("Tem certeza que quer excluir essa tarefa? ðŸ¥º")) return;

        setModules(prev => prev.map(m => {
          if(m.id !== modalModuleId) return m;
          return {
            ...m,
            tasks: m.tasks.filter(t => t.id !== editTaskId)
          };
        }));

        setShowModalTask(false);
      }

      function percentDone(module){
        if(!module.tasks.length) return 0;
        const doneCount = module.tasks.filter(t => t.doneDates && t.doneDates[today]).length;
        return Math.round((doneCount / module.tasks.length) * 100);
      }

      function totalDoneToday(){
        let total = 0;
        let done = 0;
        modules.forEach(m => {
          total += m.tasks.length;
          done += m.tasks.filter(t => t.doneDates && t.doneDates[today]).length;
        });
        if(total === 0) return 0;
        return Math.round((done / total) * 100);
      }

      function nextQuote(){
        setQuoteIndex(i => (i + 1) % quotes.length);
      }

      function setTimerPreset(min){
        setTimerSeconds(min * 60);
        setTimerLabel("CronÃ´metro Fofo âœ¨ (" + min + " min)");
      }

      function startTaskTimer(task){
        const mins = Number(task.minutes) || 15;
        setTimerSeconds(mins * 60);
        setTimerLabel("â±ï¸ " + task.emoji + " " + task.name);
        setActiveTab("timer");
      }

      const currentQuote = quotes[quoteIndex] || DEFAULT_QUOTES[0];

      return (
        React.createElement("div", { className:"app" },

          React.createElement("div", { className:"topbar" },
            React.createElement("div", { className:"title" },
              React.createElement("h1", null, "ðŸŒ¸ Rotina da Su"),
              React.createElement("div", { className:"subtitle" },
                "Seu app fofinho de organizaÃ§Ã£o âœ¨ â€” feito pra funcionar do seu jeitinho ðŸ’–"
              ),
              React.createElement("div", { className:"motivation" },
                React.createElement("div", { className:"pill" }, "ðŸ’¬ ", currentQuote),
                React.createElement("button", { className:"btn btnMini", onClick: nextQuote }, "Trocar frase âœ¨"),
                React.createElement("button", { className:"btn btnMini btnSoft", onClick: () => setShowThemeModal(true) }, "ðŸŽ¨ Cores")
              )
            ),
            React.createElement("div", { className:"row" },
              React.createElement("button", {
                className:"btn btnPrimary btnIcon",
                onClick: () => setActiveTab("home")
              }, "ðŸ¡ InÃ­cio")
            )
          ),

          React.createElement("div", { className:"woodStrip" }),

          React.createElement("div", { className:"tabs sticky" },
            React.createElement("button", { className: "tab " + (activeTab==="home" ? "active":""), onClick: () => setActiveTab("home") }, "ðŸŒ¸ Painel"),
            React.createElement("button", { className: "tab " + (activeTab==="rotinas" ? "active":""), onClick: () => setActiveTab("rotinas") }, "ðŸ“‹ Rotinas"),
            React.createElement("button", { className: "tab " + (activeTab==="timer" ? "active":""), onClick: () => setActiveTab("timer") }, "â±ï¸ CronÃ´metro"),
            React.createElement("button", { className: "tab " + (activeTab==="humor" ? "active":""), onClick: () => setActiveTab("humor") }, "ðŸ˜Š Humor"),
            React.createElement("button", { className: "tab " + (activeTab==="fechamento" ? "active":""), onClick: () => setActiveTab("fechamento") }, "ðŸ“Š Fechamento"),
          ),

          (activeTab === "home") && React.createElement(HomePanel, {
            modules,
            moodToday,
            setMoodToday,
            totalDoneToday: totalDoneToday(),
            colorOf,
            percentDone,
            openNewTask,
            toggleDone,
            startTaskTimer,
            today
          }),

          (activeTab === "rotinas") && React.createElement(RotinasPanel, {
            modules,
            colorOf,
            percentDone,
            openNewTask,
            toggleDone,
            startTaskTimer,
            openEditTask,
            today
          }),

          (activeTab === "timer") && React.createElement(TimerPanel, {
            timerSeconds,
            setTimerSeconds,
            timerRunning,
            setTimerRunning,
            timerLabel,
            setTimerLabel,
            setTimerPreset
          }),

          (activeTab === "humor") && React.createElement(HumorPanel, {
            moodToday,
            setMoodToday,
            moodHistory
          }),

          (activeTab === "fechamento") && React.createElement(FechamentoPanel, {
            modules,
            moodHistory,
            today,
            colorOf
          }),

          React.createElement(ModalTask, {
            show: showModalTask,
            onClose: () => setShowModalTask(false),
            onSave: saveTask,
            onDelete: deleteTask,
            editTaskId,
            taskName, setTaskName,
            taskEmoji, setTaskEmoji,
            taskColorKey, setTaskColorKey,
            taskSchedule, setTaskSchedule,
            taskMinutes, setTaskMinutes
          }),

          React.createElement(ThemeModal, {
            show: showThemeModal,
            onClose: () => setShowThemeModal(false),
            modules,
            setModules,
            quotes,
            setQuotes,
            colorOf
          })
        )
      );
    }

    function HomePanel(props){
      const {
        modules,
        moodToday,
        setMoodToday,
        totalDoneToday,
        colorOf,
        percentDone,
        openNewTask,
        toggleDone,
        startTaskTimer,
        today
      } = props;

      const topModules = modules.slice(0,3);

      return (
        React.createElement("div", { className:"grid" },

          React.createElement("div", { className:"card" },
            React.createElement("div", { className:"cardHeader" },
              React.createElement("div", null,
                React.createElement("div", { className:"cardTitle" }, "ðŸŒ¸ Painel de Hoje"),
                React.createElement("div", { className:"cardSub" }, "Seu progresso diÃ¡rio com doÃ§ura ðŸ’–")
              ),
              React.createElement("div", { className:"badge " + (totalDoneToday>=70 ? "ok" : totalDoneToday>=40 ? "warn" : "bad") },
                totalDoneToday + "% feito"
              )
            ),

            React.createElement("div", { className:"divider" }),

            React.createElement("div", { className:"field" },
              React.createElement("label", null, "ðŸ˜Š Como a Su estÃ¡ se sentindo agora?"),
              React.createElement("input", {
                type:"range",
                min: 0,
                max: 100,
                value: moodToday,
                onChange: (e) => setMoodToday(Number(e.target.value))
              }),
              React.createElement("div", { className:"small" },
                "Seu humor de hoje foi salvo automaticamente ðŸ’– (", today, ")"
              )
            ),

            React.createElement("div", { className:"divider" }),

            React.createElement("div", { className:"hint" },
              "ðŸŒ· Dica da Li: Se estiver cansada, faÃ§a sÃ³ 15 minutos. ConsistÃªncia Ã© mais forte que perfeiÃ§Ã£o."
            ),

            React.createElement("div", { className:"divider" }),

            React.createElement("div", { className:"twoCols" },
              topModules.map(m =>
                React.createElement("div", { key:m.id, className:"noteBox" },
                  React.createElement("div", { className:"row" },
                    React.createElement("div", { className:"tag " + (m.colorKey || "pink") },
                      React.createElement("span", { className:"dot", style:{ background: colorOf(m.colorKey) } }),
                      m.emoji, " ", m.name
                    ),
                    React.createElement("div", { className:"badge" }, percentDone(m) + "%")
                  ),

                  React.createElement("div", { className:"progressBar", style:{ marginTop:"10px" } },
                    React.createElement("div", { className:"progressFill", style:{ width: percentDone(m) + "%" } })
                  ),

                  React.createElement("div", { className:"row", style:{ marginTop:"10px" } },
                    React.createElement("button", { className:"btn btnMini btnPrimary", onClick: () => openNewTask(m.id) }, "âž• Nova tarefa"),
                  )
                )
              )
            )
          ),

          React.createElement("div", { className:"card" },
            React.createElement("div", { className:"cardHeader" },
              React.createElement("div", null,
                React.createElement("div", { className:"cardTitle" }, "âœ¨ Tarefinhas rÃ¡pidas"),
                React.createElement("div", { className:"cardSub" }, "As mais importantes de hoje ðŸŒ¸")
              )
            ),

            React.createElement("div", { className:"divider" }),

            React.createElement("div", { className:"taskList" },
              modules.slice(0,2).flatMap(m => m.tasks.slice(0,2).map(t => {
                const done = t.doneDates && t.doneDates[today];
                return React.createElement("div", { key:t.id, className:"task" },
                  React.createElement("div", { className:"taskTop" },
                    React.createElement("div", { className:"taskLeft" },
                      React.createElement("div", {
                        className:"emoji",
                        style:{ borderColor: colorOf(t.colorKey), boxShadow: "0 0 0 4px rgba(0,0,0,0.04)" }
                      }, t.emoji || "ðŸŒ¸"),
                      React.createElement("div", null,
                        React.createElement("p", { className:"taskName" }, t.name),
                        React.createElement("div", { className:"taskMeta" },
                          React.createElement("span", null, "ðŸ“… ", t.schedule || "DiÃ¡rio"),
                          React.createElement("span", null, "â±ï¸ ", (t.minutes || 15), " min"),
                          done ? React.createElement("span", { className:"badge ok" }, "Feito ðŸ’–") : React.createElement("span", { className:"badge warn" }, "Pendente")
                        )
                      )
                    ),
                    React.createElement("div", { className:"taskButtons" },
                      React.createElement("button", {
                        className:"btn btnMini",
                        onClick: () => startTaskTimer(t)
                      }, "â±ï¸ Timer"),
                      React.createElement("button", {
                        className:"btn btnMini " + (done ? "btnSoft" : "btnPrimary"),
                        onClick: () => toggleDone(m.id, t.id)
                      }, done ? "Desmarcar" : "Concluir")
                    )
                  )
                );
              }))
            ),

            React.createElement("div", { className:"divider" }),

            React.createElement("div", { className:"small" },
              "ðŸŒ¸ Seu app salva tudo automaticamente. VocÃª pode fechar e voltar quando quiser."
            )
          )

        )
      );
    }function RotinasPanel(props){
      const {
        modules,
        colorOf,
        percentDone,
        openNewTask,
        toggleDone,
        startTaskTimer,
        openEditTask,
        today
      } = props;

      return (
        React.createElement("div", { className:"card" },

          React.createElement("div", { className:"cardHeader" },
            React.createElement("div", null,
              React.createElement("div", { className:"cardTitle" }, "ðŸ“‹ Rotinas da Su"),
              React.createElement("div", { className:"cardSub" }, "Aqui vocÃª organiza tudo por categorias fofinhas ðŸŒ¸")
            )
          ),

          React.createElement("div", { className:"divider" }),

          modules.map(module => (
            React.createElement("div", { key:module.id, className:"task", style:{ marginBottom:"12px" } },

              React.createElement("div", { className:"taskTop" },
                React.createElement("div", { className:"taskLeft" },
                  React.createElement("div", {
                    className:"emoji",
                    style:{
                      borderColor: colorOf(module.colorKey),
                      boxShadow: "0 0 0 4px rgba(0,0,0,0.04)"
                    }
                  }, module.emoji || "ðŸŒ¸"),
                  React.createElement("div", null,
                    React.createElement("p", { className:"taskName", style:{ fontSize:"1.05rem" } },
                      module.name
                    ),
                    React.createElement("div", { className:"taskMeta" },
                      React.createElement("span", null, module.description || ""),
                      React.createElement("span", { className:"badge" }, percentDone(module) + "% feito")
                    )
                  )
                ),
                React.createElement("div", { className:"taskButtons" },
                  React.createElement("button", {
                    className:"btn btnMini btnPrimary",
                    onClick: () => openNewTask(module.id)
                  }, "âž• Adicionar"),
                )
              ),

              React.createElement("div", { className:"progressBar", style:{ marginTop:"10px" } },
                React.createElement("div", { className:"progressFill", style:{ width: percentDone(module) + "%" } })
              ),

              React.createElement("div", { className:"divider" }),

              React.createElement("div", { className:"taskList" },
                module.tasks.map(task => {
                  const done = task.doneDates && task.doneDates[today];
                  return React.createElement("div", { key:task.id, className:"noteBox" },

                    React.createElement("div", { className:"taskTop" },
                      React.createElement("div", { className:"taskLeft" },
                        React.createElement("div", {
                          className:"emoji",
                          style:{
                            borderColor: colorOf(task.colorKey),
                            boxShadow: "0 0 0 4px rgba(0,0,0,0.03)"
                          }
                        }, task.emoji || "ðŸŒ¸"),

                        React.createElement("div", null,
                          React.createElement("p", { className:"taskName" }, task.name),
                          React.createElement("div", { className:"taskMeta" },
                            React.createElement("span", null, "ðŸ“… ", task.schedule || "DiÃ¡rio"),
                            React.createElement("span", null, "â±ï¸ ", (task.minutes || 15), " min"),
                            done
                              ? React.createElement("span", { className:"badge ok" }, "Feito ðŸ’–")
                              : React.createElement("span", { className:"badge warn" }, "Pendente ðŸŒ¸")
                          )
                        )
                      ),

                      React.createElement("div", { className:"taskButtons" },

                        React.createElement("button", {
                          className:"btn btnMini",
                          onClick: () => startTaskTimer(task)
                        }, "â±ï¸"),

                        React.createElement("button", {
                          className:"btn btnMini btnSoft",
                          onClick: () => openEditTask(module.id, task)
                        }, "âœï¸"),

                        React.createElement("button", {
                          className:"btn btnMini " + (done ? "btnSoft" : "btnPrimary"),
                          onClick: () => toggleDone(module.id, task.id)
                        }, done ? "Desmarcar" : "Concluir")
                      )
                    )
                  );
                })
              ),
    module.notes && module.notes.length > 0 && React.createElement("div", null,
                React.createElement("div", { className:"divider" }),
                React.createElement("div", { className:"small", style:{ fontWeight:"900", marginBottom:"6px" } },
                  "ðŸ“ Notas importantes:"
                ),
                React.createElement("div", { className:"noteBox" },
                  React.createElement("ul", null,
                    module.notes.map((n, idx) => React.createElement("li", { key:idx }, n))
                  )
                )
              )
            )
          )),

          React.createElement("div", { className:"divider" }),

          React.createElement("div", { className:"hint" },
            "âœ¨ VocÃª pode editar qualquer tarefa: mudar emoji, cor, tempo do cronÃ´metro e frequÃªncia!"
          )
        )
      );
    }

    function TimerPanel(props){
      const {
        timerSeconds,
        setTimerSeconds,
        timerRunning,
        setTimerRunning,
        timerLabel,
        setTimerLabel,
        setTimerPreset
      } = props;

      function addSeconds(s){
        setTimerSeconds(prev => Math.max(0, prev + s));
      }

      function stop(){
        setTimerRunning(false);
      }

      function reset(){
        setTimerRunning(false);
        setTimerSeconds(15 * 60);
        setTimerLabel("CronÃ´metro Fofo âœ¨");
      }

      return (
        React.createElement("div", { className:"card" },

          React.createElement("div", { className:"cardHeader" },
            React.createElement("div", null,
              React.createElement("div", { className:"cardTitle" }, "â±ï¸ CronÃ´metro Ultra-EditÃ¡vel"),
              React.createElement("div", { className:"cardSub" }, "Pra vocÃª ser rÃ¡pida no sol ou no fim de tarde â˜€ï¸ðŸŒ‘")
            )
          ),

          React.createElement("div", { className:"divider" }),

          React.createElement("div", { className:"timerBox" },

            React.createElement("div", { className:"timerTop" },
              React.createElement("div", null,
                React.createElement("div", { className:"small" }, timerLabel),
                React.createElement("div", { className:"timerTime" }, formatTime(timerSeconds))
              ),
              React.createElement("div", { className:"timerBtns" },
                React.createElement("button", {
                  className:"btn btnMini btnPrimary",
                  onClick: () => setTimerRunning(r => !r)
                }, timerRunning ? "â¸ï¸ Pausar" : "â–¶ï¸ ComeÃ§ar"),

                React.createElement("button", {
                  className:"btn btnMini",
                  onClick: stop
                }, "â¹ï¸ Parar"),

                React.createElement("button", {
                  className:"btn btnMini btnSoft",
                  onClick: reset
                }, "ðŸ”„ Reset")
              )
            ),

            React.createElement("div", { className:"divider" }),

            React.createElement("div", { className:"twoCols" },
              React.createElement("div", { className:"noteBox" },
                React.createElement("div", { style:{ fontWeight:"900" } }, "âš¡ BotÃµes rÃ¡pidos"),
                React.createElement("div", { className:"small" }, "Aperte e pronto ðŸ’–"),
                React.createElement("div", { className:"row", style:{ marginTop:"10px" } },
                  React.createElement("button", { className:"btn btnMini", onClick: () => setTimerPreset(5) }, "5 min"),
                  React.createElement("button", { className:"btn btnMini", onClick: () => setTimerPreset(10) }, "10 min"),
                  React.createElement("button", { className:"btn btnMini btnPrimary", onClick: () => setTimerPreset(15) }, "15 min"),
                  React.createElement("button", { className:"btn btnMini", onClick: () => setTimerPreset(30) }, "30 min"),
                  React.createElement("button", { className:"btn btnMini", onClick: () => setTimerPreset(60) }, "60 min")
                )
              ),

              React.createElement("div", { className:"noteBox" },
                React.createElement("div", { style:{ fontWeight:"900" } }, "ðŸ› ï¸ Ajuste manual"),
                React.createElement("div", { className:"small" }, "Pra adaptar ao seu dia ðŸŒ¸"),
                React.createElement("div", { className:"row", style:{ marginTop:"10px" } },
                  React.createElement("button", { className:"btn btnMini", onClick: () => addSeconds(60) }, "+1 min"),
                  React.createElement("button", { className:"btn btnMini", onClick: () => addSeconds(5*60) }, "+5 min"),
                  React.createElement("button", { className:"btn btnMini", onClick: () => addSeconds(-60) }, "-1 min"),
                  React.createElement("button", { className:"btn btnMini btnDanger", onClick: () => setTimerSeconds(0) }, "Zerar")
                )
              )
            ),

            React.createElement("div", { className:"divider" }),

            React.createElement("div", { className:"hint" },
              "ðŸ’¡ Dica: VocÃª pode entrar em qualquer tarefa e apertar â±ï¸ para iniciar o timer automÃ¡tico com o tempo dela!"
            )
          )
        )
      );
    }

    function HumorPanel(props){
      const { moodToday, setMoodToday, moodHistory } = props;

      const last7 = useMemo(() => {
        const arr = [];
        for(let i=6;i>=0;i--){
          const d = new Date();
          d.setDate(d.getDate()-i);
          const yyyy = d.getFullYear();
          const mm = String(d.getMonth()+1).padStart(2,"0");
          const dd = String(d.getDate()).padStart(2,"0");
          const key = yyyy+"-"+mm+"-"+dd;
          arr.push({ key, value: moodHistory[key] ?? null });
        }
        return arr;
      }, [moodHistory]);

      const avg7 = useMemo(() => {
        const vals = last7.map(x => x.value).filter(v => typeof v === "number");
        if(vals.length === 0) return null;
        return Math.round(vals.reduce((a,b)=>a+b,0) / vals.length);
      }, [last7]);

      return (
        React.createElement("div", { className:"grid" },

          React.createElement("div", { className:"card" },
            React.createElement("div", { className:"cardHeader" },
              React.createElement("div", null,
                React.createElement("div", { className:"cardTitle" }, "ðŸ˜Š Humor da Su"),
                React.createElement("div", { className:"cardSub" }, "Seu bem-estar tambÃ©m Ã© uma meta ðŸ’–")
              )
            ),

            React.createElement("div", { className:"divider" }),

            React.createElement("div", { className:"field" },
              React.createElement("label", null, "ðŸŒ¸ Como vocÃª estÃ¡ se sentindo agora?"),
              React.createElement("input", {
                type:"range",
                min: 0,
                max: 100,
                value: moodToday,
                onChange: (e) => setMoodToday(Number(e.target.value))
              }),
              React.createElement("div", { className:"small" },
                "Hoje vocÃª marcou: ", React.createElement("b", null, moodToday), " / 100"
              )
            ),

            React.createElement("div", { className:"divider" }),

            React.createElement("div", { className:"hint" },
              "ðŸ’– VocÃª nÃ£o precisa estar bem todos os dias. Mas vocÃª sempre pode se cuidar."
            )
          ),

          React.createElement("div", { className:"card" },
            React.createElement("div", { className:"cardHeader" },
              React.createElement("div", null,
                React.createElement("div", { className:"cardTitle" }, "ðŸ“ˆ Ãšltimos 7 dias"),
                React.createElement("div", { className:"cardSub" }, "MÃ©dia semanal: " + (avg7 == null ? "Sem dados ainda" : (avg7 + "/100 âœ¨"))
              )
            ),

            React.createElement("div", { className:"divider" }),

            React.createElement("div", { className:"noteBox" },
              last7.map(day => (
                React.createElement("div", { key:day.key, className:"row", style:{ justifyContent:"space-between", marginBottom:"8px" } },
                  React.createElement("div", { className:"small" }, "ðŸ“… ", day.key),
                  React.createElement("div", { className:"badge" }, day.value == null ? "â€”" : (day.value + "/100"))
                )
              ))
            ),

            React.createElement("div", { className:"divider" }),

            React.createElement("div", { className:"small" },
              "âœ¨ Em breve vocÃª vai ver grÃ¡ficos semanais e mensais aqui (jÃ¡ estÃ¡ salvando tudo automaticamente!)."
            )
          )
        )
      );
    }

    function FechamentoPanel(props){
      const { modules, moodHistory, today, colorOf } = props;

      const moodVals = Object.values(moodHistory).filter(v => typeof v === "number");
      const moodAvg = moodVals.length ? Math.round(moodVals.reduce((a,b)=>a+b,0)/moodVals.length) : null;

      const allTasks = modules.flatMap(m => m.tasks.map(t => ({ ...t, module:m })));

      const doneCount = allTasks.filter(t => t.doneDates && t.doneDates[today]).length;
      const totalCount = allTasks.length;
      const pct = totalCount ? Math.round((doneCount/totalCount)*100) : 0;

      let bestModule = null;
      let bestPct = -1;

      modules.forEach(m => {
        const total = m.tasks.length;
        const done = m.tasks.filter(t => t.doneDates && t.doneDates[today]).length;
        const p = total ? Math.round((done/total)*100) : 0;
        if(p > bestPct){
          bestPct = p;
          bestModule = m;
        }
      }); const feedback = useMemo(() => {
        const lines = [];
        if(bestModule){
          lines.push("ðŸŒŸ Hoje vocÃª foi mais constante em: " + bestModule.name + " " + (bestModule.emoji||"âœ¨"));
        }
        if(moodAvg != null){
          if(moodAvg >= 75) lines.push("ðŸ˜Š Seu humor geral estÃ¡ Ã³timo! Continue se cuidando com carinho ðŸ’–");
          else if(moodAvg >= 50) lines.push("ðŸŒ¸ Seu humor estÃ¡ estÃ¡vel. Pequenos descansos ajudam muito âœ¨");
          else lines.push("ðŸ«¶ Seu humor estÃ¡ baixo. Seja gentil com vocÃª, Su. VocÃª Ã© preciosa ðŸ’–");
        }else{
          lines.push("ðŸ“Œ Comece marcando seu humor diariamente para o app analisar sua evoluÃ§Ã£o âœ¨");
        }

        if(pct >= 80) lines.push("ðŸ† VocÃª estÃ¡ brilhando! Sua rotina estÃ¡ incrÃ­vel!");
        else if(pct >= 50) lines.push("ðŸ’ª VocÃª estÃ¡ indo muito bem! SÃ³ continue com leveza.");
        else lines.push("ðŸŒ· Hoje foi mais leve. AmanhÃ£ Ã© uma nova chance. VocÃª consegue!");

        lines.push("âœ¨ Lembrete da Li: constÃ¢ncia Ã© mais importante que perfeiÃ§Ã£o.");

        return lines;
      }, [bestModule, moodAvg, pct]);

      return (
        React.createElement("div", { className:"grid" },

          React.createElement("div", { className:"card" },
            React.createElement("div", { className:"cardHeader" },
              React.createElement("div", null,
                React.createElement("div", { className:"cardTitle" }, "ðŸ“Š Fechamento Inteligente"),
                React.createElement("div", { className:"cardSub" }, "Seu resumo do dia (e do mÃªs em breve) ðŸ’–")
              )
            ),

            React.createElement("div", { className:"divider" }),

            React.createElement("div", { className:"noteBox" },
              React.createElement("div", { className:"row", style:{ justifyContent:"space-between" } },
                React.createElement("div", { className:"small" }, "ðŸ“… Hoje: ", today),
                React.createElement("div", { className:"badge " + (pct>=70 ? "ok" : pct>=40 ? "warn" : "bad") }, pct + "% concluÃ­do")
              ),

              React.createElement("div", { className:"divider" }),

              feedback.map((line, idx) =>
                React.createElement("div", { key:idx, className:"small", style:{ marginBottom:"8px" } }, line)
              )
            )
          ),

          React.createElement("div", { className:"card" },
            React.createElement("div", { className:"cardHeader" },
              React.createElement("div", null,
                React.createElement("div", { className:"cardTitle" }, "ðŸŒ¸ ConstÃ¢ncia por categoria"),
                React.createElement("div", { className:"cardSub" }, "Pra vocÃª ver onde estÃ¡ brilhando âœ¨")
              )
            ),

            React.createElement("div", { className:"divider" }),

            modules.map(m => {
              const total = m.tasks.length;
              const done = m.tasks.filter(t => t.doneDates && t.doneDates[today]).length;
              const p = total ? Math.round((done/total)*100) : 0;

              return React.createElement("div", { key:m.id, className:"noteBox", style:{ marginBottom:"10px" } },
                React.createElement("div", { className:"row", style:{ justifyContent:"space-between" } },
                  React.createElement("div", { className:"tag" },
                    React.createElement("span", { className:"dot", style:{ background: colorOf(m.colorKey) } }),
                    m.emoji, " ", m.name
                  ),
                  React.createElement("div", { className:"badge" }, p + "%")
                ),
                React.createElement("div", { className:"progressBar", style:{ marginTop:"10px" } },
                  React.createElement("div", { className:"progressFill", style:{ width: p + "%" } })
                )
              );
            })
          )
        )
      );
    }

    function ModalTask(props){
      const {
        show,
        onClose,
        onSave,
        onDelete,
        editTaskId,
        taskName, setTaskName,
        taskEmoji, setTaskEmoji,
        taskColorKey, setTaskColorKey,
        taskSchedule, setTaskSchedule,
        taskMinutes, setTaskMinutes
      } = props;

      if(!show) return null;

      return (
        React.createElement("div", { className:"modalOverlay", style:{ display:"flex" } },
          React.createElement("div", { className:"modal" },

            React.createElement("div", { className:"modalHeader" },
              React.createElement("div", null,
                React.createElement("h3", { className:"modalTitle" }, editTaskId ? "âœï¸ Editar Tarefa" : "âž• Nova Tarefa"),
                React.createElement("div", { className:"small" }, "Tudo aqui Ã© editÃ¡vel: cor, emoji, tempo, frequÃªncia ðŸ’–")
              ),
              React.createElement("button", { className:"closeX", onClick:onClose }, "âœ–")
            ),

            React.createElement("div", { className:"divider" }),

            React.createElement("div", { className:"miniGrid" },

              React.createElement("div", { className:"field" },
                React.createElement("label", null, "ðŸ“ Nome da tarefa"),
                React.createElement("input", {
                  value: taskName,
                  onChange: (e) => setTaskName(e.target.value),
                  placeholder: "Ex: Limpar pia âœ¨"
                })
              ),

              React.createElement("div", { className:"field" },
                React.createElement("label", null, "ðŸ˜Š Emoji / Ã­cone"),
                React.createElement("select", {
                  value: taskEmoji,
                  onChange: (e) => setTaskEmoji(e.target.value)
                },
                  EMOJI_SUGGESTIONS.map((em, idx) =>
                    React.createElement("option", { key:idx, value: em }, em)
                  )
                )
              ),

              React.createElement("div", { className:"field" },
                React.createElement("label", null, "ðŸŽ¨ Cor da tarefa"),
                React.createElement("select", {
                  value: taskColorKey,
                  onChange: (e) => setTaskColorKey(e.target.value)
                },
                  COLOR_PRESETS.map(c =>
                    React.createElement("option", { key:c.key, value:c.key }, c.label)
                  )
                )
              ),

              React.createElement("div", { className:"field" },
                React.createElement("label", null, "ðŸ“… FrequÃªncia / HorÃ¡rio"),
                React.createElement("input", {
                  value: taskSchedule,
                  onChange: (e) => setTaskSchedule(e.target.value),
                  placeholder: "Ex: Segunda 19:00"
                })
              ),

              React.createElement("div", { className:"field" },
                React.createElement("label", null, "â±ï¸ Minutos do cronÃ´metro"),
                React.createElement("input", {
                  type:"number",
                  value: taskMinutes,
                  onChange: (e) => setTaskMinutes(e.target.value),
                  min: 1
                })
              )
            ),

            React.createElement("div", { className:"divider" }),

            React.createElement("div", { className:"row", style:{ justifyContent:"space-between" } },
              React.createElement("button", { className:"btn btnPrimary", onClick:onSave }, "ðŸ’¾ Salvar"),
              editTaskId && React.createElement("button", { className:"btn btnDanger", onClick:onDelete }, "ðŸ—‘ï¸ Excluir")
            )
          )
        )
      );
    }

    function ThemeModal(props){
      const {
        show,
        onClose,
        modules,
        setModules,
        quotes,
        setQuotes,
        colorOf
      } = props;

      const [newQuote, setNewQuote] = useState("");

      if(!show) return null;

      function updateModuleColor(moduleId, colorKey){
        setModules(prev => prev.map(m => {
          if(m.id !== moduleId) return m;
          return { ...m, colorKey };
        }));
      }

      function addQuote(){
        if(!newQuote.trim()) return;
        setQuotes(prev => [...prev, newQuote.trim()]);
        setNewQuote("");
      }

      function removeQuote(index){
        if(!confirm("Remover essa frase? ðŸ¥º")) return;
        setQuotes(prev => prev.filter((q,i) => i !== index));
      }

      return (
        React.createElement("div", { className:"modalOverlay", style:{ display:"flex" } },
          React.createElement("div", { className:"modal" },

            React.createElement("div", { className:"modalHeader" },
              React.createElement("div", null,
                React.createElement("h3", { className:"modalTitle" }, "ðŸŽ¨ PersonalizaÃ§Ã£o da Su"),
                React.createElement("div", { className:"small" }, "Aqui vocÃª muda cores e frases do seu jeitinho ðŸ’–")
              ),
              React.createElement("button", { className:"closeX", onClick:onClose }, "âœ–")
            ),

            React.createElement("div", { className:"divider" }),

            React.createElement("div", { className:"noteBox" },
              React.createElement("div", { style:{ fontWeight:"900", marginBottom:"8px" } }, "ðŸŒˆ Mudar cor das categorias"),
              modules.map(m =>
                React.createElement("div", { key:m.id, className:"row", style:{ justifyContent:"space-between", marginBottom:"10px" } },
                  React.createElement("div", { className:"tag" },
                    React.createElement("span", { className:"dot", style:{ background: colorOf(m.colorKey) } }),
                    m.emoji, " ", m.name
                  ),
                  React.createElement("select", {
                    value: m.colorKey,
                    onChange: (e) => updateModuleColor(m.id, e.target.value),
                    style:{ maxWidth:"220px" }
                  },
                    COLOR_PRESETS.map(c =>
                      React.createElement("option", { key:c.key, value:c.key }, c.label)
                    )
                  )
                )
              )
            ),
    React.createElement("div", { className:"divider" }),

            React.createElement("div", { className:"noteBox" },
              React.createElement("div", { style:{ fontWeight:"900", marginBottom:"8px" } }, "ðŸ’¬ Frases motivacionais"),
              React.createElement("div", { className:"small" }, "VocÃª pode adicionar as suas e remover as que nÃ£o quiser âœ¨"),

              React.createElement("div", { className:"row", style:{ marginTop:"10px" } },
                React.createElement("input", {
                  value: newQuote,
                  onChange: (e) => setNewQuote(e.target.value),
                  placeholder: "Digite uma frase linda aqui ðŸ’–"
                }),
                React.createElement("button", { className:"btn btnMini btnPrimary", onClick:addQuote }, "âž• Adicionar")
              ),

              React.createElement("div", { className:"divider" }),

              quotes.map((q, idx) =>
                React.createElement("div", { key:idx, className:"row", style:{ justifyContent:"space-between", marginBottom:"10px" } },
                  React.createElement("div", { className:"small", style:{ flex:1, marginRight:"10px" } }, "ðŸŒ¸ ", q),
                  React.createElement("button", { className:"btn btnMini btnDanger", onClick: () => removeQuote(idx) }, "Remover")
                )
              )
            )
          )
        )
      );
    }function App(){
      const today = getTodayKey();

      const [tab, setTab] = useState("rotinas");

      const [showTaskModal, setShowTaskModal] = useState(false);
      const [showThemeModal, setShowThemeModal] = useState(false);

      const [activeModuleId, setActiveModuleId] = useState(null);
      const [editTaskId, setEditTaskId] = useState(null);

      const [taskName, setTaskName] = useState("");
      const [taskEmoji, setTaskEmoji] = useState("ðŸŒ¸");
      const [taskColorKey, setTaskColorKey] = useState("pink");
      const [taskSchedule, setTaskSchedule] = useState("DiÃ¡rio");
      const [taskMinutes, setTaskMinutes] = useState(15);

      const [timerSeconds, setTimerSeconds] = useState(15 * 60);
      const [timerRunning, setTimerRunning] = useState(false);
      const [timerLabel, setTimerLabel] = useState("CronÃ´metro Fofo âœ¨");

      const [moodToday, setMoodToday] = useState(70);

      const [quotes, setQuotes] = useState(() => load("su_quotes", [
        "Su, vocÃª Ã© capaz de cuidar da sua vida com doÃ§ura ðŸ’–",
        "A vida nÃ£o precisa ser perfeita para ser maravilhosa âœ¨",
        "Pequenos passos todos os dias criam grandes mudanÃ§as ðŸŒ·",
        "Hoje Ã© um dia lindo para ser constante ðŸŒ¸",
        "VocÃª Ã© preciosa, Su. NÃ£o se cobre tanto ðŸ«¶"
      ]));

      const [moodHistory, setMoodHistory] = useState(() => load("su_mood_history", {}));

      const [modules, setModules] = useState(() => load("su_modules", [
        {
          id: "fe",
          name: "Rotina Constante",
          emoji: "ðŸ•Šï¸",
          colorKey: "tiffany",
          description: "FÃ©, estudo e constÃ¢ncia espiritual",
          notes: [
            "ðŸ“– Segunda (19:00) â€” Estudo da BÃ­blia com o Lucas",
            "â° Quarta (07:30) â€” Iniciar preparaÃ§Ã£o",
            "âœï¸ Quarta (08:00) â€” Campo Zoom (Cartas)",
            "ðŸ“ Quarta (13:00) â€” Preparar reuniÃ£o",
            "ðŸ“š SÃ¡bado (pÃ³s-almoÃ§o) â€” Estudo da Sentinela",
            "ðŸ‘” SÃ¡bado (17:00) â€” Arrumar crianÃ§as e sair"
          ],
          tasks: [
            { id:"fe1", name:"Estudo da BÃ­blia com o Lucas", emoji:"ðŸ“–", colorKey:"tiffany", schedule:"Segunda 19:00", minutes:45, doneDates:{} },
            { id:"fe2", name:"PreparaÃ§Ã£o do Campo", emoji:"â°", colorKey:"tiffany", schedule:"Quarta 07:30", minutes:30, doneDates:{} },
            { id:"fe3", name:"Campo pelo Zoom (Cartas)", emoji:"âœï¸", colorKey:"tiffany", schedule:"Quarta 08:00", minutes:60, doneDates:{} },
            { id:"fe4", name:"Preparar ReuniÃ£o Meio de Semana", emoji:"ðŸ“", colorKey:"tiffany", schedule:"Quarta 13:00", minutes:60, doneDates:{} },
            { id:"fe5", name:"Estudo da Sentinela", emoji:"ðŸ“š", colorKey:"tiffany", schedule:"SÃ¡bado pÃ³s-almoÃ§o", minutes:60, doneDates:{} },
            { id:"fe6", name:"Arrumar crianÃ§as e sair", emoji:"ðŸ‘”", colorKey:"tiffany", schedule:"SÃ¡bado 17:00", minutes:30, doneDates:{} }
          ]
        },

        {
          id:"casa",
          name:"Casa & Regras",
          emoji:"ðŸ¡",
          colorKey:"pink",
          description:"OrganizaÃ§Ã£o da casa, closet e cinco ous",
          notes: [
            "ðŸ›ï¸ HÃ¡bito de Ouro: Arrumar a cama assim que o Edinei levar o Lucas na porteira",
            "ðŸ‘— Closet: Uma seÃ§Ã£o por dia",
            "ðŸ”„ Lei do Minimalismo: Entrou uma peÃ§a, sai outra"
          ],
          tasks: [
            { id:"c1", name:"Arrumar a cama", emoji:"ðŸ›ï¸", colorKey:"pink", schedule:"DiÃ¡rio (manhÃ£)", minutes:5, doneDates:{} },
            { id:"c2", name:"Cinco Ous - Lavou", emoji:"ðŸ«§", colorKey:"pink", schedule:"Conforme necessidade", minutes:15, doneDates:{} },
            { id:"c3", name:"Cinco Ous - Pendurou", emoji:"â˜€ï¸", colorKey:"pink", schedule:"Conforme necessidade", minutes:10, doneDates:{} },
            { id:"c4", name:"Cinco Ous - Dobrou", emoji:"ðŸ‘", colorKey:"pink", schedule:"Conforme necessidade", minutes:20, doneDates:{} },
            { id:"c5", name:"Cinco Ous - Passou", emoji:"ðŸ’¨", colorKey:"pink", schedule:"Conforme necessidade", minutes:30, doneDates:{} },
            { id:"c6", name:"Cinco Ous - Guardou", emoji:"ðŸšª", colorKey:"pink", schedule:"Conforme necessidade", minutes:10, doneDates:{} },
            { id:"c7", name:"Closet: uma seÃ§Ã£o por dia", emoji:"ðŸ‘—", colorKey:"pink", schedule:"DiÃ¡rio", minutes:20, doneDates:{} },
            { id:"c8", name:"Pia limpa e cozinha organizada", emoji:"ðŸ§¼", colorKey:"beige", schedule:"DiÃ¡rio", minutes:15, doneDates:{} },
            { id:"c9", name:"Varrer e passar pano", emoji:"ðŸ§¹", colorKey:"beige", schedule:"DiÃ¡rio", minutes:20, doneDates:{} }
          ]
        },

        {
          id:"sitio",
          name:"SÃ­tio & Horta",
          emoji:"ðŸŒ¿",
          colorKey:"green",
          description:"Horta, riacho e cuidados com a terra",
          notes: [
            "ðŸŒ± Horta do Zero: almeirÃ£o e novas mudas",
            "ðŸŒŠ Riachinho: rastelar e cuidar das flores do fundo"
          ],
          tasks: [
            { id:"s1", name:"Cuidar do almeirÃ£o", emoji:"ðŸ¥¬", colorKey:"green", schedule:"Semanal", minutes:20, doneDates:{} },
            { id:"s2", name:"Plantar mudas novas", emoji:"ðŸŒ±", colorKey:"green", schedule:"Semanal", minutes:30, doneDates:{} },
            { id:"s3", name:"Rastelar o riacho", emoji:"ðŸŒŠ", colorKey:"green", schedule:"Semanal", minutes:25, doneDates:{} },
            { id:"s4", name:"Cuidar das flores do fundo", emoji:"ðŸŒ¸", colorKey:"green", schedule:"Semanal", minutes:20, doneDates:{} }
          ]
        },

        {
          id:"cozinha",
          name:"Cozinha Caipira",
          emoji:"ðŸ¥£",
          colorKey:"beige",
          description:"FogÃ£o a lenha, congelados e produÃ§Ã£o semanal",
          notes: [
            "ðŸ”¥ Dia de produÃ§Ã£o: preparar feijÃ£o, carnes, legumes e congelar",
            "ðŸ§Š Estoque: feijÃ£o, carne moÃ­da, carne desfiada, legumes branqueados",
            "ðŸž Misturas secas: pÃ£o de queijo e bolos"
          ],
          tasks: [
            { id:"k1", name:"ProduÃ§Ã£o semanal (fogÃ£o a lenha)", emoji:"ðŸ”¥", colorKey:"beige", schedule:"1x por semana", minutes:120, doneDates:{} },
            { id:"k2", name:"Congelar feijÃ£o e carnes", emoji:"ðŸ§Š", colorKey:"beige", schedule:"Semanal", minutes:40, doneDates:{} },
            { id:"k3", name:"Branquear legumes", emoji:"ðŸ¥•", colorKey:"beige", schedule:"Semanal", minutes:35, doneDates:{} },
            { id:"k4", name:"Separar misturas secas", emoji:"ðŸž", colorKey:"beige", schedule:"Semanal", minutes:25, doneDates:{} }
          ]
        },

        {
          id:"beleza",
          name:"Autocuidado & SaÃºde",
          emoji:"ðŸ’…",
          colorKey:"pink",
          description:"HenÃª, depilaÃ§Ã£o, Ã¡gua e anticoncepcional",
          notes: [
            "ðŸ–¤ HenÃª: registrar data e contar atÃ© o retoque",
            "ðŸ’Š Anticoncepcional: lembrar diariamente",
            "ðŸ’§ Meta Ã¡gua: 8 copos por dia"
          ],
          tasks: [
            { id:"b1", name:"Tomar anticoncepcional", emoji:"ðŸ’Š", colorKey:"tiffany", schedule:"DiÃ¡rio", minutes:1, doneDates:{} },
            { id:"b2", name:"Beber 8 copos de Ã¡gua", emoji:"ðŸ’§", colorKey:"tiffany", schedule:"DiÃ¡rio", minutes:1, doneDates:{} },
            { id:"b3", name:"Cronograma capilar (HidrataÃ§Ã£o)", emoji:"ðŸ§´", colorKey:"pink", schedule:"Semanal", minutes:40, doneDates:{} },
            { id:"b4", name:"Cronograma capilar (NutriÃ§Ã£o)", emoji:"ðŸ¥‘", colorKey:"pink", schedule:"Semanal", minutes:40, doneDates:{} },
            { id:"b5", name:"Cronograma capilar (ReconstruÃ§Ã£o)", emoji:"ðŸ§¬", colorKey:"pink", schedule:"Mensal", minutes:50, doneDates:{} },
            { id:"b6", name:"HenÃª (retoque)", emoji:"ðŸ–¤", colorKey:"pink", schedule:"A cada 30 dias", minutes:90, doneDates:{} },
            { id:"b7", name:"DepilaÃ§Ã£o", emoji:"âœ¨", colorKey:"pink", schedule:"A cada 20 dias", minutes:60, doneDates:{} }
          ]
        }
      ]));

      useEffect(() => save("su_modules", modules), [modules]);
      useEffect(() => save("su_quotes", quotes), [quotes]);
      useEffect(() => save("su_mood_history", moodHistory), [moodHistory]);

      useEffect(() => {
        setMoodHistory(prev => ({ ...prev, [today]: moodToday }));
      }, [moodToday]);

      useEffect(() => {
        if(!timerRunning) return;
        const id = setInterval(() => {
          setTimerSeconds(s => {
            if(s <= 1){
              clearInterval(id);
              setTimerRunning(false);
              try{ navigator.vibrate && navigator.vibrate([200,100,200,100,400]); }catch(e){}
              alert("â° Tempo acabou! VocÃª conseguiu, Su! ðŸ’–âœ¨");
              return 0;
            }
            return s - 1;
          });
        }, 1000);
        return () => clearInterval(id);
      }, [timerRunning]);

      function colorOf(key){
        const found = COLOR_PRESETS.find(c => c.key === key);
        return found ? found.value : "#ff7ab6";
      }

      function percentDone(module){
        if(!module.tasks || module.tasks.length === 0) return 0;
        const done = module.tasks.filter(t => t.doneDates && t.doneDates[today]).length;
        return Math.round((done / module.tasks.length) * 100);
      }

      function openNewTask(moduleId){
        setActiveModuleId(moduleId);
        setEditTaskId(null);
        setTaskName("");
        setTaskEmoji("ðŸŒ¸");
        setTaskColorKey("pink");
        setTaskSchedule("DiÃ¡rio");
        setTaskMinutes(15);
        setShowTaskModal(true);
      }

      function openEditTask(moduleId, task){
        setActiveModuleId(moduleId);
        setEditTaskId(task.id);
        setTaskName(task.name);
        setTaskEmoji(task.emoji || "ðŸŒ¸");
        setTaskColorKey(task.colorKey || "pink");
        setTaskSchedule(task.schedule || "DiÃ¡rio");
        setTaskMinutes(task.minutes || 15);
        setShowTaskModal(true);
      }

      function saveTask(){
        if(!taskName.trim()){
          alert("ðŸ¥º Coloca um nome na tarefa!");
          return;
        }

        setModules(prev => prev.map(m => {
          if(m.id !== activeModuleId) return m;

          const updated = { ...m };

          if(editTaskId){
            updated.tasks = updated.tasks.map(t => {
              if(t.id !== editTaskId) return t;
              return {
                ...t,
                name: taskName.trim(),
                emoji: taskEmoji,
                colorKey: taskColorKey,
                schedule: taskSchedule.trim(),
                minutes: Number(taskMinutes) || 15
              };
            });
          } else {
            const newId = "t" + Math.random().toString(36).slice(2,9);
            updated.tasks = [
              ...updated.tasks,
              {
                id: newId,
                name: taskName.trim(),
                emoji: taskEmoji,
                colorKey: taskColorKey,
                schedule: taskSchedule.trim(),
                minutes: Number(taskMinutes) || 15,
                doneDates: {}
              }
            ];
          }

          return updated;
        }));

        setShowTaskModal(false);
      }

      function deleteTask(){
        if(!confirm("Excluir essa tarefa? ðŸ¥º")) return;

        setModules(prev => prev.map(m => {
          if(m.id !== activeModuleId) return m;
          return { ...m, tasks: m.tasks.filter(t => t.id !== editTaskId) };
        }));

        setShowTaskModal(false);
      }

      function toggleDone(moduleId, taskId){
        setModules(prev => prev.map(m => {
          if(m.id !== moduleId) return m;
          return {
            ...m,
            tasks: m.tasks.map(t => {
              if(t.id !== taskId) return t;
              const doneDates = { ...(t.doneDates || {}) };
              if(doneDates[today]) delete doneDates[today];
              else doneDates[today] = true;
              return { ...t, doneDates };
            })
          };
        }));
      }

      function startTaskTimer(task){
        const mins = Number(task.minutes) || 15;
        setTimerSeconds(mins * 60);
        setTimerLabel(task.emoji + " " + task.name);
        setTab("timer");
        setTimerRunning(true);
      }

      function setTimerPreset(min){
        setTimerSeconds(min * 60);
        setTimerLabel("CronÃ´metro " + min + " min âœ¨");
      }

      const quote = useMemo(() => {
        if(!quotes || quotes.length === 0) return "";
        const idx = Math.floor(Math.random() * quotes.length);
        return quotes[idx];
      }, [tab]);

      return (
        React.createElement("div", { className:"app" },

          React.createElement("div", { className:"topbar" },
            React.createElement("div", { className:"brand" },
              React.createElement("div", { className:"logo" }, "ðŸŒ¸"),
              React.createElement("div", null,
                React.createElement("div", { className:"title" }, "Rotina da Su"),
                React.createElement("div", { className:"subtitle" }, "Seu app fofo e poderoso âœ¨")
              )
            ),

            React.createElement("button", {
              className:"btn btnMini btnSoft",
              onClick: () => setShowThemeModal(true)
            }, "ðŸŽ¨ Personalizar")
          ),

          React.createElement("div", { className:"quoteBox" },
            React.createElement("div", { className:"small" }, "ðŸ’– Frase do dia"),
            React.createElement("div", { className:"quote" }, quote)
          ),

          React.createElement("div", { className:"content" },

            tab === "rotinas" && React.createElement(RotinasPanel, {
              modules,
              colorOf,
              percentDone,
              openNewTask,
              toggleDone,
              startTaskTimer,
              openEditTask,
              today
            }),

            tab === "timer" && React.createElement(TimerPanel, {
              timerSeconds,
              setTimerSeconds,
              timerRunning,
              setTimerRunning,
              timerLabel,
              setTimerLabel,
              setTimerPreset
            }),

            tab === "humor" && React.createElement(HumorPanel, {
              moodToday,
              setMoodToday,
              moodHistory
            }),

            tab === "fechamento" && React.createElement(FechamentoPanel, {
              modules,
              moodHistory,
              today,
              colorOf
            })
          ),

          React.createElement("div", { className:"nav" },
            React.createElement("button", {
              className:"navBtn " + (tab==="rotinas" ? "active" : ""),
              onClick: () => setTab("rotinas")
            }, "ðŸ“‹", React.createElement("span", null, "Rotinas")),

            React.createElement("button", {
              className:"navBtn " + (tab==="timer" ? "active" : ""),
              onClick: () => setTab("timer")
            }, "â±ï¸", React.createElement("span", null, "Timer")),

            React.createElement("button", {
              className:"navBtn " + (tab==="humor" ? "active" : ""),
              onClick: () => setTab("humor")
            }, "ðŸ˜Š", React.createElement("span", null, "Humor")),

            React.createElement("button", {
              className:"navBtn " + (tab==="fechamento" ? "active" : ""),
              onClick: () => setTab("fechamento")
            }, "ðŸ“Š", React.createElement("span", null, "Fechamento"))
          ),

          React.createElement(ModalTask, {
            show: showTaskModal,
            onClose: () => setShowTaskModal(false),
            onSave: saveTask,
            onDelete: deleteTask,
            editTaskId,
            taskName, setTaskName,
            taskEmoji, setTaskEmoji,
            taskColorKey, setTaskColorKey,
            taskSchedule, setTaskSchedule,
            taskMinutes, setTaskMinutes
          }),

          React.createElement(ThemeModal, {
            show: showThemeModal,
            onClose: () => setShowThemeModal(false),
            modules,
            setModules,
            quotes,
            setQuotes,
            colorOf
          })
        )
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(
      React.createElement(App)
    );
  </script>

  <!-- SERVICE WORKER INLINE (OFFLINE) -->
  <script>
    if("serviceWorker" in navigator){
      window.addEventListener("load", () => {
        const swCode = `
          const CACHE_NAME = "rotina-su-v1";
          const URLS = ["./"];

          self.addEventListener("install", (event) => {
            event.waitUntil(
              caches.open(CACHE_NAME).then(cache => cache.addAll(URLS))
            );
          });

          self.addEventListener("activate", (event) => {
            event.waitUntil(
              caches.keys().then(keys => Promise.all(
                keys.map(k => k !== CACHE_NAME ? caches.delete(k) : null)
              ))
            );
          });

          self.addEventListener("fetch", (event) => {
            event.respondWith(
              caches.match(event.request).then(resp => {
                return resp || fetch(event.request).then(networkResp => {
                  return caches.open(CACHE_NAME).then(cache => {
                    cache.put(event.request, networkResp.clone());
                    return networkResp;
                  });
                }).catch(() => caches.match("./"));
              })
            );
          });
        `;

        const blob = new Blob([swCode], { type:"text/javascript" });
        const swUrl = URL.createObjectURL(blob);

        navigator.serviceWorker.register(swUrl)
          .then(() => console.log("ðŸŒ¸ Offline ativado!"))
          .catch(err => console.log("Erro SW", err));
      });
    }
  </script>

</body>
</html>
